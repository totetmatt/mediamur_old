<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

	<title>Wallpic :: </title>
	<meta name="description" content="MinimalCSS is a simple HTML / CSS template that is incredibly easy to customize. It can be downloaded and used with no limitations or obligations.">

	<link href="minimal.css" rel="stylesheet">
	<script type="text/javascript">

		// Socket  
		var socket = null;

		// Image score to make it bigger, will be reseted at each page reload ;)
		var imageScore = {};

		window.onload = function() {
			socket = new WebSocket("ws://localhost:8080/mediastream");
			socket.binaryType = "arraybuffer";
			socket.onopen = function() {
				console.log("Connected!");
			}
			socket.onmessage = function(e) {

				var data = JSON.parse(e.data);
				if(imageScore[data['hash']]  === undefined) {
					imageScore[data['hash']] = 0;
					document.getElementById("wrapper").insertAdjacentHTML('afterbegin', '<a target="_blank" href="'+data['url']+'"><img alt="'+data['hash']+' [=] '+data['id']+'" id="'+data['hash']+'" src="'+data['url']+'"/></a>')
				} else {
					document.getElementById(data['hash']).style.height = 100+(imageScore[data['hash']] *10)+"px"
					document.getElementById(data['hash']).style.width = 100+(imageScore[data['hash']] *10)+"px"
				 }
				imageScore[data['hash']] +=1;

			}
			socket.onclose = function(e) {
				console.log("Connection closed.");
				socket = null;
			}
		};

	</script>
</head>
<body>
	<div class="container">
		<header>
			<!-- <a class="logo" href="http://minimalcss.com">Minimal CSS Template</a>-->
			<nav class="float-right">
				<ul>
					
				</ul>
			</nav>
		</header>
		<div class="row"><div class="col-12" id="wrapper"></div></div>
		<footer>
			Wallpic from <a href="">@totetmatt</a> |  <!-- Not required, but appreciated. -->Design <a href="http://minimalcss.com">Minimal</a>
		</footer><!-- footer -->
	</div>
</body>
</html>